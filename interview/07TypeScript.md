---
sidebar_position: 5
title: vue面试题
---

## react 的事件机制 ？

1. 优点

- 事件都绑定到了 `div#root` 上 可以大量节省内存占用，减少事件注册,当新增子对象时无需再次对其绑定
- 合成事件：围绕浏览器原生事件充当跨浏览器包装器的对象,它们将不同浏览器的行为合并为一个 API,这样做是为了确保事件在不同浏览器中显示一致的属性（重写 preventDefault 和 stopPropagation）

2. 底层实现

- 通过插件系统注册事件名
- 给`div#root`绑定事件
  - 遍历所有的原生的事件比如 click,进行监听
  - 生成 dispatchEvent 函数，绑定两个阶段的事件
- 派发事件冒泡和捕获（点击事件源）
  - 获取事件源，拿到真实 DOM 和对应的 fiber
  - 从事件源向上递遍历 fiber，将对应事件映射的函数添加到 listeners
  - 创建合成事件实例，兼容处理
  - 将对应的合成事件和函数添加到 dispatchQueue
- 区分冒泡和捕获 执行对应的回调函数
