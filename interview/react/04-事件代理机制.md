---
title: 4. 事件代理机制
last_update:
  date: 12/20/2022
  author: 高红翔
---

## 简述下 React 的事件代理机制?

React 并不会把所有的处理函数直接绑定在真实的节点上。而是把所有事件绑定到结构的最外层，使用一个统一的事件监听器，这个事件监听器上维持了一个映射来保存所有组件内部的事件监听和处理函数

当组件挂载或卸载时，只是在这个统一的事件监听器上插入或删除一些对象。

当事件发生时，首先被这个统一的事件监听器处理，然后在映射里找到真正的事件处理函数并调用。

这样做的优点是解决了兼容性问题，并且简化了事件处理和回收机制(不需要手动的解绑事件，React 已经在内部处理了)。但是有些事件 React 并没有实现，比如 window 的 resize 事件

## React 的事件代理机制和原生事件绑定有什么区别?

- 事件传播与阻止事件的传播：React 的合成事件并没有实现事件捕获，只支持了事件冒泡。阻止事件传播 React 做了兼容性处理，只需要 e.preventDefault()即可，原生存在兼容性问题
- 事件类型：React 是原生事件类型的一个子集(React 只是实现了 DOMlevel3 的事件接口，有些事件 React 并没有实现，比如 window 的 resize 事件)。阻止 React 事件冒泡的行为只能用于 React 合成事件系统，但是在原生事件中的阻止冒泡行为，却可以阻止 React 合成事件的传播
- 事件的绑定方式：原生事件系统中支持多种不同的绑定事件的方式，React 中只有一种
- 事件对象：原生中存在 IE 的兼容性问题，React 做了兼容处理
