"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3067],{3905:(e,n,a)=>{a.d(n,{Zo:()=>p,kt:()=>y});var r=a(7294);function t(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){t(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function s(e,n){if(null==e)return{};var a,r,t=function(e,n){if(null==e)return{};var a,r,t={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],n.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var c=r.createContext({}),u=function(e){var n=r.useContext(c),a=n;return e&&(a="function"==typeof e?e(n):l(l({},n),e)),a},p=function(e){var n=u(e.components);return r.createElement(c.Provider,{value:n},e.children)},i={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var a=e.components,t=e.mdxType,o=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=u(a),y=t,d=m["".concat(c,".").concat(y)]||m[y]||i[y]||o;return a?r.createElement(d,l(l({ref:n},p),{},{components:a})):r.createElement(d,l({ref:n},p))}));function y(e,n){var a=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var o=a.length,l=new Array(o);l[0]=m;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s.mdxType="string"==typeof e?e:t,l[1]=s;for(var u=2;u<o;u++)l[u]=a[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},9593:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>i,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var r=a(7462),t=(a(7294),a(3905));const o={title:"3.\u89e3\u6790 URL Params \u4e3a\u5bf9\u8c61",last_update:{date:"12/20/2022",author:"gaohongxiang"}},l=void 0,s={unversionedId:"\u9ad8\u9891\u624b\u6495\u9898/square",id:"\u9ad8\u9891\u624b\u6495\u9898/square",title:"3.\u89e3\u6790 URL Params \u4e3a\u5bf9\u8c61",description:"\u9898\u76ee",source:"@site/leetcode/00-\u9ad8\u9891\u624b\u6495\u9898/03-square.md",sourceDirName:"00-\u9ad8\u9891\u624b\u6495\u9898",slug:"/\u9ad8\u9891\u624b\u6495\u9898/square",permalink:"/website/leetcode/\u9ad8\u9891\u624b\u6495\u9898/square",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"3.\u89e3\u6790 URL Params \u4e3a\u5bf9\u8c61",last_update:{date:"12/20/2022",author:"gaohongxiang"}},sidebar:"tutorialSidebar",previous:{title:"2.JavaScript \u6570\u7ec4\u7ed3\u6784\u4e0e\u6811\u7ed3\u6784\u7684\u8f6c\u6362",permalink:"/website/leetcode/\u9ad8\u9891\u624b\u6495\u9898/arrayToTree"},next:{title:"4.\u9650\u5236\u5e76\u53d1",permalink:"/website/leetcode/\u9ad8\u9891\u624b\u6495\u9898/concurrentLimit"}},c={},u=[{value:"\u9898\u76ee",id:"\u9898\u76ee",level:2},{value:"\u7b80\u5355\u89e3\u6cd5",id:"\u7b80\u5355\u89e3\u6cd5",level:3},{value:"\u5347\u7ea7\u7248",id:"\u5347\u7ea7\u7248",level:3},{value:"\u5b8c\u6574\u7248",id:"\u5b8c\u6574\u7248",level:3}],p={toc:u};function i(e){let{components:n,...a}=e;return(0,t.kt)("wrapper",(0,r.Z)({},p,a,{components:n,mdxType:"MDXLayout"}),(0,t.kt)("h2",{id:"\u9898\u76ee"},"\u9898\u76ee"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-js"},"let url =\n  \"http://www.domain.com/?user=anonymous&id=123&id=456&city=%E5%8C%97%E4%BA%AC&enabled\"\nparseParam(url)\n/* \u7ed3\u679c\n{ user: 'anonymous',\n  id: [ 123, 456 ], // \u91cd\u590d\u51fa\u73b0\u7684 key \u8981\u7ec4\u88c5\u6210\u6570\u7ec4\uff0c\u80fd\u88ab\u8f6c\u6210\u6570\u5b57\u7684\u5c31\u8f6c\u6210\u6570\u5b57\u7c7b\u578b\n  city: '\u5317\u4eac', // \u4e2d\u6587\u9700\u89e3\u7801\n  enabled: true, // \u672a\u6307\u5b9a\u503c\u5f97 key \u7ea6\u5b9a`\u4e3a true\n}\n*/\n")),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-js"},"//qs \u5e93\nvar qs = require(\"qs\")\n\nconst { parse } = qs\n\nconsole.log(\n  parse(\"user=anonymous&id=123&id=456&city=%E5%8C%97%E4%BA%AC&enabled\")\n)\nconsole.log(parse(\"a=1&b=&c=5&f=hello\"))\nconsole.log(parse(\"a&b&c\"))\nconsole.log(parse(\"a[name]=fox&a[company]=tecent&b=why\"))\nconsole.log(parse(\"color=Deep%20Blue\"))\nconsole.log(parse(\"a[0]=1&a[1]=2\"))\n// { user: 'anonymous', id: [ '123', '456' ], city: '\u5317\u4eac', enabled: '' }\n// { a: '1', b: '', c: '5', f: 'hello' }\n// { a: '', b: '', c: '' }\n// { a: { name: 'fox', company: 'tecent' }, b: 'why' }\n// { color: 'Deep Blue' }\n// { a: [ '1', '2' ] }\n")),(0,t.kt)("h3",{id:"\u7b80\u5355\u89e3\u6cd5"},"\u7b80\u5355\u89e3\u6cd5"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-js"},"function querySearch(url) {\n  const query = url.split(\"?\").pop().split(\"#\").shift().split(\"&\")\n  const res = {}\n  query.forEach((item) => {\n    const [key, val] = item.split(\"=\")\n    res[key] = val\n  })\n  return res\n}\nconsole.log(\n  querySearch(\"user=anonymous&id=123&id=456&city=%E5%8C%97%E4%BA%AC&enabled\")\n)\nconsole.log(querySearch(\"a=1&b=&c=5&f=hello\"))\nconsole.log(querySearch(\"a&b&c\"))\nconsole.log(querySearch(\"a[name]=fox&a[company]=tecent&b=why\"))\nconsole.log(querySearch(\"color=Deep%20Blue\"))\nconsole.log(querySearch(\"a[0]=1&a[1]=2\"))\n// {\n//   user: 'anonymous',\n//   id: '456',\n//   city: '%E5%8C%97%E4%BA%AC',\n//   enabled: undefined\n// }\n// { a: '1', b: '', c: '5', f: 'hello' }\n// { a: undefined, b: undefined, c: undefined }\n// { 'a[name]': 'fox', 'a[company]': 'tecent', b: 'why' }\n// { color: 'Deep%20Blue' }\n// { 'a[0]': '1', 'a[1]': '2' }\n")),(0,t.kt)("h3",{id:"\u5347\u7ea7\u7248"},"\u5347\u7ea7\u7248"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-js"},"function parseParam(url) {\n  const paramsStr = /.+\\?(.+)$/.exec(url)[1] // \u5c06 ? \u540e\u9762\u7684\u5b57\u7b26\u4e32\u53d6\u51fa\u6765\n  const paramsArr = paramsStr.split(\"&\") // \u5c06\u5b57\u7b26\u4e32\u4ee5 & \u5206\u5272\u540e\u5b58\u5230\u6570\u7ec4\u4e2d\n  let paramsObj = {}\n  // \u5c06 params \u5b58\u5230\u5bf9\u8c61\u4e2d\n  paramsArr.forEach((param) => {\n    if (/=/.test(param)) {\n      // \u5904\u7406\u6709 value \u7684\u53c2\u6570\n      let [key, val] = param.split(\"=\") // \u5206\u5272 key \u548c value\n      val = decodeURIComponent(val) // \u89e3\u7801\n      val = /^\\d+$/.test(val) ? parseFloat(val) : val // \u5224\u65ad\u662f\u5426\u8f6c\u4e3a\u6570\u5b57\n\n      if (paramsObj.hasOwnProperty(key)) {\n        // \u5982\u679c\u5bf9\u8c61\u6709 key\uff0c\u5219\u6dfb\u52a0\u4e00\u4e2a\u503c\n        paramsObj[key] = [].concat(paramsObj[key], val)\n      } else {\n        // \u5982\u679c\u5bf9\u8c61\u6ca1\u6709\u8fd9\u4e2a key\uff0c\u521b\u5efa key \u5e76\u8bbe\u7f6e\u503c\n        paramsObj[key] = val\n      }\n    } else {\n      // \u5904\u7406\u6ca1\u6709 value \u7684\u53c2\u6570\n      paramsObj[param] = true\n    }\n  })\n\n  return paramsObj\n}\nconsole.log(\n  parseParam(\"user=anonymous&id=123&id=456&city=%E5%8C%97%E4%BA%AC&enabled\")\n)\nconsole.log(parseParam(\"a=1&b=&c=5&f=hello\"))\nconsole.log(parseParam(\"a&b&c\"))\nconsole.log(parseParam(\"a[name]=fox&a[company]=tecent&b=why\"))\nconsole.log(parseParam(\"color=Deep%20Blue\"))\nconsole.log(parseParam(\"a[0]=1&a[1]=2\"))\n// { user: 'anonymous', id: [ 123, 456 ], city: '\u5317\u4eac', enabled: true }\n// { a: 1, b: '', c: 5, f: 'hello' }\n// { a: true, b: true, c: true }\n// { 'a[name]': 'fox', 'a[company]': 'tecent', b: 'why' }\n// { color: 'Deep Blue' }\n// { 'a[0]': 1, 'a[1]': 2 }\n")),(0,t.kt)("h3",{id:"\u5b8c\u6574\u7248"},"\u5b8c\u6574\u7248"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-js"},'function parse(str) {\n  return str.split("&").reduce((o, kv) => {\n    const [key, value] = kv.split("=")\n    if (!value) {\n      o[key] = true\n      return o\n    }\n    deep_set(\n      o,\n      key.split(/[\\[\\]]/g).filter((x) => x),\n      value\n    )\n    return o\n  }, {})\n}\n\nfunction deep_set(o, path, value) {\n  let i = 0\n  for (; i < path.length - 1; i++) {\n    if (o[path[i]] === undefined) {\n      if (path[i + 1].match(/^\\d+$/)) {\n        o[path[i]] = []\n      } else {\n        o[path[i]] = {}\n      }\n    }\n    o = o[path[i]]\n  }\n  value = decodeURIComponent(value)\n  value = /^\\d+$/.test(value) ? parseFloat(value) : value // \u5224\u65ad\u662f\u5426\u8f6c\u4e3a\u6570\u5b57\n  if (o.hasOwnProperty(path[i])) {\n    // \u5982\u679c\u5bf9\u8c61\u6709 key\uff0c\u5219\u6dfb\u52a0\u4e00\u4e2a\u503c\n    o[path[i]] = [].concat(o[path[i]], value)\n  } else {\n    // \u5982\u679c\u5bf9\u8c61\u6ca1\u6709\u8fd9\u4e2a key\uff0c\u521b\u5efa key \u5e76\u8bbe\u7f6e\u503c\n    o[path[i]] = value\n  }\n}\nconsole.log(\n  parse("user=anonymous&id=123&id=456&city=%E5%8C%97%E4%BA%AC&enabled")\n)\nconsole.log(parse("a=1&b=&c=5&f=hello"))\nconsole.log(parse("a&b&c"))\nconsole.log(parse("a[name]=fox&a[company]=tecent&b=why"))\nconsole.log(parse("color=Deep%20Blue"))\nconsole.log(parse("a[0]=1&a[1]=2"))\n// { user: \'anonymous\', id: 456, city: \'\u5317\u4eac\', enabled: true }\n// { a: 1, b: true, c: 5, f: \'hello\' }\n// { a: true, b: true, c: true }\n// { a: { name: \'fox\', company: \'tecent\' }, b: \'why\' }\n// { color: \'Deep Blue\' }\n// { a: [ 1, 2 ] }\n')))}i.isMDXComponent=!0}}]);